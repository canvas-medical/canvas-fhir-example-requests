meta {
  name: Create Coverage
  type: http
  seq: 1
}

post {
  url: {{base_url}}/Coverage
  body: json
  auth: inherit
}

params:query {
  ~interaction: update
}

auth:bearer {
  token: {{fhir_access_token}}
}

body:json {
  {
    "resourceType": "Coverage",
    "identifier": [
      {
        "type": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
              "code": "MB",
              "display": "Member Number"
            }
          ]
        },
        "value": "1234"
      }
    ],
    "status": "active",
    "type": {
      "coding": [
        {
          "system": "http://terminology.hl7.org/CodeSystem/v3-ActCode",
          "code": "MILITARY",
          "display": "military health program"
        }
      ],
      "text": "Military"
    },
    "subscriber": {
      "reference": "Patient/{{patient_id}}"
    },
    "subscriberId": "123",
    "beneficiary": {
      "reference": "Patient/{{patient_id}}"
    },
    "relationship": {
      "coding": [
        {
          "system": "http://terminology.hl7.org/CodeSystem/subscriber-relationship",
          "code": "self"
        }
      ]
    },
    "period": {
      "start": "2021-06-27"
    },
    "payor": [
      {
        "identifier": {
          "system": "https://www.claim.md/services/era/",
          "value": "AMM03"
        },
        "display": "Independence Blue Cross Blue Shield"
      }
    ],
    "class": [
      {
        "type": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/coverage-class",
              "code": "group"
            }
          ]
        },
        "value": "Captains Only"
      },
      {
        "type": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/coverage-class",
              "code": "subgroup"
            }
          ]
        },
        "value": "Subgroup 2"
      },
      {
        "type": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/coverage-class",
              "code": "plan"
            }
          ]
        },
        "value": "Starfleet HMO"
      },
      {
        "type": {
          "coding": [
            {
              "system": "http://terminology.hl7.org/CodeSystem/coverage-class",
              "code": "subplan"
            }
          ]
        },
        "value": "Stars Subplan"
      }
    ],
    "order": 1
  }
}
